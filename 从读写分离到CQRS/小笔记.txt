链接：https://mp.weixin.qq.com/s/rpiYZkxiLKa77OFw8XaBwA

关键词概念：读写分离：把库分为主库和从库，读操作在主数据库，写操作在从数据库。主从复制。（写操作影响查询操作）
			视图：固定查询出来的虚表。
			CQRS：Command Query Responsibility Segregation,命令（增删改）和查询的责任分离

	张大胖的数据库优化，首先由堆硬件提高性能，这是在硬件方面下手。
	可是并没有根本解决，读写压力太大。只能在“软”方面下手。采用读写分离，数据库拆分为主从。------慢的根本原因是复杂的sql影响，并不是写操作影响。这里采用读写分离作用不大。
读写分离要注意的两点，切换数据源，主从复制。切换数据源可以用AOP；主从复制要求比较复杂，从数据库数据同步到主数据库。这里最重要的一点是要事务操作（事务日志控制回滚），不然异常中断，导致数据不完整。--------这里可以看下mycat中间件
	也没有解决问题，把常用的复杂查询数据新建个表插入一个只提供查询的常用查询库。--------采用CQRS，通常用户读的数据是过时的，如果有展示的数据变动，则通过事件更新数据，达到最终一致性。
	把影响性能的复杂动态查询变成事先查询好存到一张新表里的静态数据，定时+事件触发更新这张静态数据表。